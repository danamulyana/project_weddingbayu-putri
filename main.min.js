const params=new URLSearchParams(window.location.search),elemetsInvitation=document.querySelectorAll('[data-invitation="dear"]'),WeddingDate=new Date("2024-09-26T08:00:00");var swiper=new Swiper(".swiper-container",{autoplay:{delay:5e3,disableOnInteraction:!1},effect:"fade",loop:!0,allowTouchMove:!1,fadeEffect:{crossFade:!0},speed:2e3}),swiper=new Swiper(".thank-container",{autoplay:{delay:5e3,disableOnInteraction:!1},effect:"fade",loop:!0,allowTouchMove:!1,fadeEffect:{crossFade:!0},speed:2e3}),swiperGalery=new Swiper(".galery__body-container",{autoplay:{delay:1e4,disableOnInteraction:!1},effect:"slide",loop:!0,allowTouchMove:!1,speed:2e3});const openCalender=()=>{let e=new Date(WeddingDate.getTime()+36e5),a,n="https://www.google.com/calendar/render?action=TEMPLATE&text=The+Wedding+Of+Bayu+%26amp;+Putri&dates="+(WeddingDate.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z")+"/"+e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z&details=Bergabunglah%20dengan%20kami%20dalam%20merayakan%20persatuan%20indah%20antara%20Bayu%20saputra%20Amd.Kep%20dan%20Putri%20Dinda%20Pratiwi%20Amd.%20Kep%20saat%20mereka%20memulai%20perjalanan%20hidup%20mereka%20bersama.%20Upacara%20pernikahan%20ini%20akan%20menjadi%20momen%20yang%20hangat%20dan%20penuh%20kebahagiaan%2C%20dipenuhi%20dengan%20cinta%2C%20tawa%2C%20dan%20kenangan%20yang%20berharga.%0A%0ATanggal%3A%2026%20September%202024%0AWaktu%3A%2008%3A00%20%0ATempat%3A%20Kp.%20mareleng%20005%2F007%20ds%20bojongsari%2C%20kec%20kedung%20waringin%2C%20kab%20bekasi%0A%0AKami%20sangat%20menantikan%20kehadiran%20keluarga%20dan%20teman-teman%20dalam%20hari%20istimewa%20ini.%20Kehadiran%20Anda%20akan%20menambah%20kebahagiaan%20dan%20menciptakan%20kenangan%20yang%20akan%20dikenang%20selamanya.%0A%0ADengan%20cinta%2C%0ABayu%20%26%20Putri%0A&location=%20Kp.%20mareleng%20005%2F007%20ds%20bojongsari%2C%20kec%20kedung%20waringin%2C%20kab%20bekasi";window.open(n,"_blank")},confirmGift=()=>{var e,a,n="https://wa.me/6281234567890?text="+encodeURIComponent("Halo, saya ingin mengkonfirmasi bahwa saya telah mengirimkan angpao untuk pernikahan [Nama Pengantin] melalui transfer bank. Jumlah yang dikirimkan adalah sebesar [nominal angpao], dan telah ditransfer ke rekening [nama bank] dengan nomor rekening [nomor rekening]. Terima kasih!");window.open(n,"_blank")};let isMusicAtemp=!1,isMusicPlaying=!1,playBoxAnimation,pauseBoxAnimation,pauseMusic,playMusic;function playMusicOnce(){"function"!=typeof playMusic||isMusicAtemp||isMusicPlaying||setTimeout(playMusic,500)}!function e(){let e=document.createElement("audio");e.autoplay=!0,e.muted=!0,e.loop=!0,e.load(),e.src="/Assets/music/song1.weba",playBoxAnimation=function(){document.querySelector(".music-button").classList.contains("playing")||document.querySelector(".music-button").classList.add("playing")},pauseBoxAnimation=function(){document.querySelector(".music-button").classList.contains("playing")&&document.querySelector(".music-button").classList.remove("playing")},pauseMusic=function(){e.pause(),pauseBoxAnimation(),isMusicAtemp=!0,isMusicPlaying=!1},playMusic=function(){isMusicAtemp=!1,e.muted=!1;var a=e.play();void 0!==a&&a.then(e=>{isMusicPlaying=!0,playBoxAnimation()}).catch(e=>{isMusicPlaying=!1,pauseBoxAnimation()})},document.querySelector("#button-music").addEventListener("click",function(e){e.preventDefault(),isMusicPlaying?pauseMusic():playMusic()})}(),window.addEventListener("load",playMusicOnce),window.addEventListener("click",playMusicOnce),window.addEventListener("scroll",playMusicOnce),document.addEventListener("click",playMusicOnce),document.addEventListener("scroll",playMusicOnce);const musicShow=()=>{let e=document.getElementById("button-music");this.scrollY>=200?e.classList.add("show"):e.classList.remove("show")};function updateAttendanceCounts(e,a){document.querySelector(".rsvp-attendance__comments-count span").innerText=a,document.querySelector(".hadir").innerText=e.hadir,document.querySelector(".tidak-hadir").innerText=e.tidakHadir,document.querySelector(".ragu").innerText=e.masihRagu}function appendNewComment(e){let a=document.getElementById("comments-section"),n=document.createElement("li");n.classList.add("rsvp-attendance__comments--section_item");let t=`
        <div class="comment-item__content">
            <div class="comment-item__content-info">
                <h2>${e.name}</h2>
                <span data-tooltip="${e.confirmation.replace("_"," ")}">${"hadir"===e.confirmation?'<i class="fa-solid fa-circle-check"></i>':"tidak-hadir"===e.confirmation?'<i class="fa-solid fa-circle-xmark"></i>':'<i class="fa-solid fa-circle-question"></i>'}</span>
            </div>
            <div class="comment-item__content-body">
                <p>${e.message}</p>
            </div>
            <div class="comment-item__content-footer">
                <i class="fa fa-clock"></i><p>${timeAgo(e.createdAt)}</p>
            </div>
        </div>  
    `;n.innerHTML=t,a.appendChild(n)}function timeAgo(e){let a=new Date(e),n=new Date,t=Math.floor((n-a)/1e3),i=Math.floor(t/31536e3);return i>=1?`${i} tahun yang lalu`:(i=Math.floor(t/2592e3))>=1?`${i} bulan yang lalu`:(i=Math.floor(t/86400))>=1?`${i} hari yang lalu`:(i=Math.floor(t/3600))>=1?`${i} jam yang lalu`:(i=Math.floor(t/60))>=1?`${i} menit yang lalu`:"Baru saja"}window.addEventListener("scroll",musicShow),document.getElementById("submit-rsvp").addEventListener("click",async function(e){e.preventDefault();let a=document.getElementById("name").value,n=document.getElementById("message").value,t=document.getElementById("confirmation").value;if(!a||!n||!t){alert("Please fill in all fields.");return}let i={eventId:"bayu&putri2024",name:a,message:n,confirmation:t};try{let o=await fetch("https://rsvp-danamulyana.vercel.app/api/rsvp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),r=await o.json();o.ok?(appendNewComment(i),document.getElementById("attendance-form").reset()):alert(`Error: ${r.message}`)}catch(l){console.error("Error submitting the form:",l),alert("Failed to submit. Please try again later.")}});const loadRSVP=async()=>{let e=await fetch("https://rsvp-danamulyana.vercel.app/api/rsvp/bayu&putri2024",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();e.ok?(updateAttendanceCounts(a.counts,a.totalRSVP),a.map(e=>{appendNewComment(e)}),document.getElementById("attendance-form").reset()):alert(`Error: ${a.message}`)};window.onload=function(){setTimeout(()=>{window.scrollTo(0,0)},100),document.body.classList.remove("allow-scroll"),document.documentElement.style.overflow="hidden"},document.addEventListener("DOMContentLoaded",()=>{document.getElementById("open-invitation").addEventListener("click",function(){window.scrollTo({top:document.querySelector("#calenderofWedding").offsetTop,behavior:"smooth"}),document.documentElement.style.overflow="",document.body.classList.add("allow-scroll")});let e=params.get("dear");elemetsInvitation.forEach(a=>{null==e?a.textContent="Nama Tamu":a.textContent=e}),loadRSVP(),document.querySelector("#saveCalendar").addEventListener("click",e=>{e.stopPropagation(),openCalender()});new ClipboardJS('button[data-button="clipboard"]').on("success",function(e){let a=e.trigger.innerHTML;e.trigger.innerText="Berhasil di salin",setTimeout(()=>{e.trigger.innerHTML=a},1e3),e.clearSelection()});var a=setInterval(function(){var e=new Date().getTime(),n=WeddingDate.getTime()-e;document.querySelector("[data-countdown='days']").innerHTML=Math.floor(n/864e5),document.querySelector("[data-countdown='hours']").innerHTML=Math.floor(n%864e5/36e5),document.querySelector("[data-countdown='minutes']").innerHTML=Math.floor(n%36e5/6e4),document.querySelector("[data-countdown='seconds']").innerHTML=Math.floor(n%6e4/1e3),n<0&&(clearInterval(a),document.querySelector("[data-countdown='days']").innerHTML="00",document.querySelector("[data-countdown='hours']").innerHTML="00",document.querySelector("[data-countdown='minutes']").innerHTML="00",document.querySelector("[data-countdown='seconds']").innerHTML="00",alert("Countdown selesai!"))},1e3);let n=ScrollReveal({distance:"60px",duration:2800});n.reveal("#calenderofWedding",{delay:500}),n.reveal(".widget-top__container, .widget-data, .container-ourpray, .container-ourlove__heading-galery, .section-weddingdate__body--icon, .galery-item, .gift-container__heading, .thankyou__container--title",{interval:100}),n.reveal(".widget-countdown__container, .section-weddingdate__heading, .section-weddingdate__body--location, .thankyou__container--heading",{origin:"top",interval:100}),n.reveal(".container-ourlove__heading, .galery__head, .thankyou__container--separator, .footer-header",{origin:"left"}),n.reveal(".reverse > .galery__head, .galery__body-widget, .section-weddingdate__body--date > h2, .gift-container__rekening",{origin:"right"}),n.reveal(".reverse > .galery__body > .galery__body-widget, .section-weddingdate__body--date > h3, .gift-container__rekening:nth-child(2)",{origin:"left"});let t=document.createElement("div");t.classList.add("tooltip"),document.body.appendChild(t),document.querySelectorAll("[data-tooltip]").forEach(function(e){e.addEventListener("mouseenter",function(a){let n=e.getAttribute("data-tooltip");t.innerText=n;let i=e.getBoundingClientRect(),o=i.left+window.scrollX+i.width/2-t.offsetWidth/2,r=i.top+window.scrollY-t.offsetHeight-10;t.style.left=`${o}px`,t.style.top=`${r}px`,t.classList.add("visible")}),e.addEventListener("mouseleave",function(){t.classList.remove("visible")}),e.addEventListener("mousemove",function(e){let a=e.pageX-t.offsetWidth/2,n=e.pageY-t.offsetHeight-10;t.style.left=`${a}px`,t.style.top=`${n}px`})})});